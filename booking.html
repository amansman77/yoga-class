<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>예약하기 • Mindful Motion</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'warm-brown': {
              50: '#fdf8f6',
              100: '#f2e8e5',
              200: '#eaddd7',
              300: '#e0cdc2',
              400: '#d2bab0',
              500: '#bfa094',
              600: '#a18072',
              700: '#977669',
              800: '#846358',
              900: '#43302b',
            }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-50">
  
  <!-- Header -->
  <header class="bg-white shadow-sm border-b border-warm-brown-100">
    <div class="max-w-7xl mx-auto px-8 py-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <a href="index.html" class="text-2xl font-serif font-bold text-warm-brown-800">
            Mindful Motion
          </a>
        </div>
        <div class="flex items-center space-x-6">
          <a href="index.html" class="text-gray-600 hover:text-warm-brown-600 transition-colors">
            홈으로
          </a>
          <a href="index.html#classes" class="text-gray-600 hover:text-warm-brown-600 transition-colors">
            클래스
          </a>
          <a href="location.html" class="text-gray-600 hover:text-warm-brown-600 transition-colors">
            찾아오기
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto px-8 py-16">
    <div class="bg-gradient-to-br from-warm-brown-600 to-warm-brown-700 rounded-3xl p-12 text-white">
      <div class="inline-flex items-center px-3 py-1 rounded-full bg-warm-brown-100/20 text-warm-brown-100 text-sm font-medium mb-6 border border-warm-brown-200/30">
        <span class="w-2 h-2 bg-warm-brown-300 rounded-full mr-2"></span>
        Easy Booking
      </div>
      <h1 class="text-4xl font-serif font-bold mb-6">
        지금 바로<br>
        <span class="text-warm-brown-200">시작하세요</span>
      </h1>
      <p class="text-lg text-warm-brown-100 mb-8 leading-relaxed">
        간편한 온라인 예약 시스템으로 원하는 클래스를 
        언제든지 예약하고 관리하세요.
      </p>
      
      <!-- Booking Form -->
      <form id="bookingForm" class="space-y-6 mb-8">
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <label for="name" class="block text-warm-brown-100 text-sm font-medium mb-2">이름</label>
            <input type="text" id="name" name="name" required 
                   class="w-full px-4 py-3 rounded-lg bg-white/10 border border-warm-brown-200/30 text-white placeholder-warm-brown-200 focus:outline-none focus:ring-2 focus:ring-warm-brown-300 focus:border-transparent"
                   placeholder="홍길동">
          </div>
          <div>
            <label for="phone" class="block text-warm-brown-100 text-sm font-medium mb-2">연락처</label>
            <input type="tel" id="phone" name="phone" required 
                   class="w-full px-4 py-3 rounded-lg bg-white/10 border border-warm-brown-200/30 text-white placeholder-warm-brown-200 focus:outline-none focus:ring-2 focus:ring-warm-brown-300 focus:border-transparent"
                   placeholder="010-1234-5678">
          </div>
        </div>
        
        <div>
          <label for="email" class="block text-warm-brown-100 text-sm font-medium mb-2">이메일</label>
          <input type="email" id="email" name="email" required 
                 class="w-full px-4 py-3 rounded-lg bg-white/10 border border-warm-brown-200/30 text-white placeholder-warm-brown-200 focus:outline-none focus:ring-2 focus:ring-warm-brown-300 focus:border-transparent"
                 placeholder="example@email.com">
        </div>
        
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <label for="classType" class="block text-warm-brown-100 text-sm font-medium mb-2">클래스 선택</label>
            <select id="classType" name="classType" required 
                    class="w-full px-4 py-3 rounded-lg bg-white/10 border border-warm-brown-200/30 text-white focus:outline-none focus:ring-2 focus:ring-warm-brown-300 focus:border-transparent">
              <option value="" class="text-gray-800">클래스를 선택하세요</option>
              <option value="hatha" class="text-gray-800">Hatha Yoga (초급자)</option>
              <option value="vinyasa" class="text-gray-800">Vinyasa Flow (중급자)</option>
              <option value="restorative" class="text-gray-800">Restorative (모든 레벨)</option>
              <option value="power" class="text-gray-800">Power Yoga (고급자)</option>
              <option value="yin" class="text-gray-800">Yin Yoga (명상 중심)</option>
              <option value="hot" class="text-gray-800">Hot Yoga (특별 클래스)</option>
            </select>
          </div>
          <div>
            <label for="date" class="block text-warm-brown-100 text-sm font-medium mb-2">희망 날짜</label>
            <input type="date" id="date" name="date" required 
                   class="w-full px-4 py-3 rounded-lg bg-white/10 border border-warm-brown-200/30 text-white focus:outline-none focus:ring-2 focus:ring-warm-brown-300 focus:border-transparent">
          </div>
        </div>
        
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <label for="time" class="block text-warm-brown-100 text-sm font-medium mb-2">희망 시간</label>
            <select id="time" name="time" required 
                    class="w-full px-4 py-3 rounded-lg bg-white/10 border border-warm-brown-200/30 text-white focus:outline-none focus:ring-2 focus:ring-warm-brown-300 focus:border-transparent">
              <option value="" class="text-gray-800">시간을 선택하세요</option>
              <option value="06:00" class="text-gray-800">06:00 - 07:00</option>
              <option value="07:00" class="text-gray-800">07:00 - 08:00</option>
              <option value="09:00" class="text-gray-800">09:00 - 10:00</option>
              <option value="10:00" class="text-gray-800">10:00 - 11:00</option>
              <option value="18:00" class="text-gray-800">18:00 - 19:00</option>
              <option value="19:00" class="text-gray-800">19:00 - 20:00</option>
              <option value="20:00" class="text-gray-800">20:00 - 21:00</option>
            </select>
          </div>
          <div>
            <label for="experience" class="block text-warm-brown-100 text-sm font-medium mb-2">요가 경험</label>
            <select id="experience" name="experience" required 
                    class="w-full px-4 py-3 rounded-lg bg-white/10 border border-warm-brown-200/30 text-white focus:outline-none focus:ring-2 focus:ring-warm-brown-300 focus:border-transparent">
              <option value="" class="text-gray-800">경험을 선택하세요</option>
              <option value="beginner" class="text-gray-800">초보자 (6개월 미만)</option>
              <option value="intermediate" class="text-gray-800">중급자 (6개월-2년)</option>
              <option value="advanced" class="text-gray-800">고급자 (2년 이상)</option>
            </select>
          </div>
        </div>
        
        <div>
          <label for="message" class="block text-warm-brown-100 text-sm font-medium mb-2">특별 요청사항 (선택)</label>
          <textarea id="message" name="message" rows="3" 
                    class="w-full px-4 py-3 rounded-lg bg-white/10 border border-warm-brown-200/30 text-white placeholder-warm-brown-200 focus:outline-none focus:ring-2 focus:ring-warm-brown-300 focus:border-transparent resize-none"
                    placeholder="부상 이력, 특별한 요청사항 등을 적어주세요"></textarea>
        </div>
        
        <div class="flex items-center">
          <input type="checkbox" id="agree" name="agree" required 
                 class="w-4 h-4 text-warm-brown-600 bg-white/10 border-warm-brown-200 rounded focus:ring-warm-brown-300 focus:ring-2">
          <label for="agree" class="ml-2 text-sm text-warm-brown-100">
            개인정보 수집 및 이용에 동의합니다. 
            <a href="privacy.html" target="_blank" class="text-warm-brown-200 underline hover:text-white">자세히 보기</a>
          </label>
        </div>
        
        <button type="submit" 
                class="w-full bg-white text-warm-brown-800 hover:bg-warm-brown-50 px-8 py-4 rounded-full font-semibold text-lg transition-colors duration-200 shadow-lg">
          예약 신청하기
        </button>
      </form>
      
      <!-- Success Message (Hidden by default) -->
      <div id="successMessage" class="hidden bg-green-500/20 border border-green-400/30 rounded-lg p-4 mb-6">
        <div class="flex items-center">
          <div class="w-6 h-6 bg-green-400 rounded-full flex items-center justify-center mr-3">
            <span class="text-white text-sm">✓</span>
          </div>
          <div>
            <div class="font-semibold text-green-100">예약 신청이 완료되었습니다!</div>
            <div class="text-sm text-green-200">곧 연락드리겠습니다.</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-warm-brown-900 text-white py-12 mt-16">
    <div class="max-w-7xl mx-auto px-8 text-center">
      <h3 class="text-2xl font-serif font-bold mb-4">Mindful Motion</h3>
      <p class="text-warm-brown-200 mb-6">
        몸과 마음의 균형을 찾아가는 프리미엄 요가 스튜디오
      </p>
      <div class="text-warm-brown-300 text-sm">
        © 2024 Mindful Motion. All rights reserved.
      </div>
    </div>
  </footer>

  <script>
    // Booking Form Handler
    document.getElementById('bookingForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Get form data
      const formData = new FormData(this);
      const bookingData = {
        name: formData.get('name'),
        phone: formData.get('phone'),
        email: formData.get('email'),
        classType: formData.get('classType'),
        date: formData.get('date'),
        time: formData.get('time'),
        experience: formData.get('experience'),
        message: formData.get('message'),
        agree: formData.get('agree')
      };
      
      // Validate required fields
      if (!bookingData.name || !bookingData.phone || !bookingData.email || 
          !bookingData.classType || !bookingData.date || !bookingData.time || 
          !bookingData.experience || !bookingData.agree) {
        alert('모든 필수 항목을 입력해주세요.');
        return;
      }
      
      // Validate email format
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(bookingData.email)) {
        alert('올바른 이메일 주소를 입력해주세요.');
        return;
      }
      
      // Validate phone format
      const phoneRegex = /^010-\d{4}-\d{4}$/;
      if (!phoneRegex.test(bookingData.phone)) {
        alert('올바른 연락처를 입력해주세요. (예: 010-1234-5678)');
        return;
      }
      
      // Validate date (must be future date)
      const selectedDate = new Date(bookingData.date);
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      if (selectedDate < today) {
        alert('미래 날짜를 선택해주세요.');
        return;
      }
      
      // Simulate form submission
      console.log('예약 신청 데이터:', bookingData);
      
      // Send Discord notification
      sendDiscordNotification(bookingData);
      
      // Show success message
      document.getElementById('successMessage').classList.remove('hidden');
      document.getElementById('bookingForm').style.display = 'none';
      
      // Scroll to success message
      document.getElementById('successMessage').scrollIntoView({ 
        behavior: 'smooth', 
        block: 'center' 
      });
    });
    
    // Set minimum date to today
    document.getElementById('date').min = new Date().toISOString().split('T')[0];
    
    // Send Discord notification
    function sendDiscordNotification(bookingData) {
      const classNames = {
        'hatha': 'Hatha Yoga (초급자)',
        'vinyasa': 'Vinyasa Flow (중급자)',
        'restorative': 'Restorative (모든 레벨)',
        'power': 'Power Yoga (고급자)',
        'yin': 'Yin Yoga (명상 중심)',
        'hot': 'Hot Yoga (특별 클래스)'
      };
      
      const experienceNames = {
        'beginner': '초보자 (6개월 미만)',
        'intermediate': '중급자 (6개월-2년)',
        'advanced': '고급자 (2년 이상)'
      };
      
      // Discord webhook URL from environment variable
      const webhookUrl = process.env.DISCORD_WEBHOOK_URL || 'https://discord.com/api/webhooks/1420655931943026799/bffuAoyGkT6HFJ7bmw8Zrw43bToh-X0WW6Nc8kfI-4XrFrqHdkDf4vgs6OK7AyJV_5Of';
      
      const embed = {
        title: "🧘‍♀️ 새로운 요가 클래스 예약 신청",
        color: 0x8B4513, // 웜 브라운 색상
        fields: [
          {
            name: "👤 예약자 정보",
            value: `**이름:** ${bookingData.name}\n**연락처:** ${bookingData.phone}\n**이메일:** ${bookingData.email}`,
            inline: false
          },
          {
            name: "📅 클래스 정보",
            value: `**클래스:** ${classNames[bookingData.classType] || bookingData.classType}\n**날짜:** ${bookingData.date}\n**시간:** ${bookingData.time}\n**경험:** ${experienceNames[bookingData.experience] || bookingData.experience}`,
            inline: false
          },
          {
            name: "📝 특별 요청사항",
            value: bookingData.message || "없음",
            inline: false
          },
          {
            name: "✅ 동의 여부",
            value: `개인정보 수집 및 이용 동의: ${bookingData.agree ? '✅ 동의' : '❌ 미동의'}`,
            inline: false
          }
        ],
        footer: {
          text: "Mindful Motion • 예약 시스템",
          icon_url: "https://cdn.discordapp.com/embed/avatars/0.png"
        },
        timestamp: new Date().toISOString()
      };
      
      const payload = {
        content: `@here 새로운 예약 신청이 도착했습니다!`,
        embeds: [embed]
      };
      
      // Discord 웹훅으로 전송 (실제 구현에서는 서버 사이드에서 처리하는 것이 안전)
      fetch(webhookUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(payload)
      }).then(response => {
        if (response.ok) {
          console.log('Discord 알림 전송 성공');
        } else {
          console.error('Discord 알림 전송 실패:', response.status);
        }
      }).catch(error => {
        console.error('Discord 알림 전송 오류:', error);
        // 웹훅이 설정되지 않은 경우 콘솔에 로그만 출력
        console.log('예약 신청 데이터:', bookingData);
      });
    }
  </script>

</body>
</html>
